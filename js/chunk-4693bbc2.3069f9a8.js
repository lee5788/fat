(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4693bbc2"],{"83c9":function(e,t,r){"use strict";r("adad")},9951:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"navPage iBg"},[r("navbar"),r("div",{staticClass:"row pt-5"},[r("ul",{staticClass:"col-22 flex offset-1 mt-5"},e._l(e.kuang,(function(t,a){return r("li",{key:a,class:["flex-1 tab1 py-2",{"bl-solid":a>0,Cur:a===e.tabCur}],on:{click:function(t){return e.tabSelect(a)}}},[r("span",[e._v(e._s(e.$t(t)))])])})),0),r("div",{staticClass:"col-22 offset-1 radius bg-white shadow row p-4 mt-3"},[r("div",{staticClass:"col-24 left py-1"},[e._v("订单列表("+e._s(e.orderCount)+")：")]),e._l(e.nodes,(function(t,a){return r("div",{key:a,staticClass:"col-24 left by-solid py-1"},[r("span",{staticClass:"text-sm"},[e._v(e._s(a+1)+" - "+e._s(t.address))]),r("div",{staticClass:"flex"},[r("div",{staticClass:"flex-3"},[r("div",{staticClass:"text-md"},[e._v(" 碎片本金("+e._s(e.fixNumber(t.order.USDT).toFixed(2))+") ")]),r("span",{staticClass:"text-sm"},[e._v(" 收益:"+e._s(e.fixNumber(t.order.Rewards).toFixed(2))+"/"+e._s(e.fixNumber(t.order.topReward).toFixed(2))+" ")])]),r("div",{staticClass:"flex-2 right"},[r("span",{staticClass:"text-md"},[e._v(" 总利息:"+e._s(t.order.rewardsRate/1e4)+"% ")]),e._m(0,!0)])]),r("div",{staticClass:"flex"},[r("div",{staticClass:"flex-3 text-sm"},[e._v(" "+e._s(e.timestampToTime(t.order.createTime))+" - "+e._s(e.timestampToTime(t.order.Finish))+" ")]),e.fixNumber(t.order.Rewards)<e.fixNumber(t.order.topReward)?r("button",{staticClass:"btn bg-gradual-purple ml-2 sm",on:{click:function(r){return e.notifyRewardUser(e.tabCur,t.address)}}},[e._v(" 补发 ")]):e._e()])])})),e.loading?r("div",{staticStyle:{"text-align":"center",color:"#666",padding:"2rem 0"}},[e._v(" 加载中... ")]):0===e.nodes.length?r("div",{staticStyle:{"text-align":"center",color:"#ccc"}},[e._v(" 无信息 ")]):e._e(),e.orderCount>e.pageSize?r("div",{staticClass:"col-24 flex justify-center mt-3"},[r("button",{staticClass:"btn bg-gradual-purple mr-2",class:{"opacity-50":1===e.currentPage||e.loading},staticStyle:{padding:"0.5rem 1rem","font-size":"0.875rem"},attrs:{disabled:1===e.currentPage||e.loading},on:{click:e.prevPage}},[e._v(" 上一页 ")]),r("span",{staticClass:"mx-2",staticStyle:{"line-height":"2.5rem",color:"#666"}},[e._v(" "+e._s(e.currentPage)+" / "+e._s(Math.ceil(e.orderCount/e.pageSize))+" "),r("span",{staticStyle:{"font-size":"0.75rem",color:"#999"}},[e._v(" ("+e._s(e.orderCount)+"条) ")])]),r("button",{staticClass:"btn bg-gradual-purple ml-2",class:{"opacity-50":e.currentPage>=Math.ceil(e.orderCount/e.pageSize)||e.loading},staticStyle:{padding:"0.5rem 1rem","font-size":"0.875rem"},attrs:{disabled:e.currentPage>=Math.ceil(e.orderCount/e.pageSize)||e.loading},on:{click:e.nextPage}},[e._v(" 下一页 ")])]):e._e()],2)])],1)},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"text-sm"},[r("span",{staticClass:"text-md"})])])}],s=r("3835"),i=r("1da1"),c=(r("14d9"),r("e9f5"),r("9485"),r("d3b7"),r("96cf"),r("fa7d")),o=r("c030"),u=r("780e"),d=r("d399"),l=r("403a"),g=r("9d8d"),f={components:{navbar:g["a"]},data:function(){return{kuang:["5D","7D","15D","30D"],tabCur:0,orderCount:0,myAddress:"",contractAddress:"0x40834C9eC0a42F29c112c8de5766253f98C217cd",masTokenAddress:"",uTokenAddress:"0x55d398326f99059ff775485246999027b3197955",decimals:18,config:l["a"],gasLimit:382040,nodes:[],min_gasprice:.1,currentPage:1,pageSize:10,loading:!1}},mixins:[c["b"],c["c"],c["d"],c["e"],c["a"]],created:function(){this.init()},methods:{init:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=e.signer){t.next=1;break}return t.abrupt("return");case 1:return e.bus.$emit("loading",!0),t.next=2,e.provider.getGasPrice();case 2:r=t.sent,r=o["a"].utils.formatUnits(r,"gwei"),r>e.min_gasprice&&(e.min_gasprice=r),a=new o["a"].Contract(e.contractAddress,u["a"],e.signer),e.contract=a,e.getOrder(0),e.bus.$emit("loading",!1);case 3:case"end":return t.stop()}}),t)})))()},tabSelect:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.tabCur=e,t.nodes=[],t.currentPage=1,t.getOrder(t.tabCur);case 1:case"end":return r.stop()}}),r)})))()},getOrder:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n,i,c,o,u,d,l,g,f,m,p,b,h,x,v,w;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=!0,a=0,r.next=1,t.to(t.contract.getPoolUsersCount(e));case 1:n=r.sent,i=Object(s["a"])(n,2),c=i[0],o=i[1],t.doResponse(c,o)&&(a=parseInt(o)),t.orderCount=a,u=(t.currentPage-1)*t.pageSize,d=Math.min(u+t.pageSize,a),l=u;case 2:if(!(l<d)){r.next=6;break}return r.next=3,t.to(t.contract.poolUsers(e,l));case 3:if(g=r.sent,f=Object(s["a"])(g,2),m=f[0],p=f[1],!t.doResponse(m,p)){r.next=5;break}return b={},r.next=4,t.to(t.contract.orders(e,p));case 4:h=r.sent,x=Object(s["a"])(h,2),v=x[0],w=x[1],t.doResponse(v,w)&&(b=w),t.nodes.push({address:p,order:b});case 5:l++,r.next=2;break;case 6:t.loading=!1;case 7:case"end":return r.stop()}}),r)})))()},prevPage:function(){this.currentPage>1&&(this.currentPage--,this.getOrder(this.tabCur))},nextPage:function(){var e=Math.ceil(this.orderCount/this.pageSize);this.currentPage<e&&(this.currentPage++,this.getOrder(this.tabCur))},search:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.init();case 1:case"end":return t.stop()}}),t)})))()},notifyRewardUser:function(e,t){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,i,c,u,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=1,r.getEstimateGas((function(){return r.contract.estimateGas.notifyRewardUser(e,t,{gasPrice:o["a"].utils.parseUnits(String(r.min_gasprice),"gwei")})}));case 1:if(n=a.sent,0!==n){a.next=2;break}return a.abrupt("return");case 2:return console.log(e,t),a.next=3,r.to(r.contract.notifyRewardUser(e,t,{gasLimit:n,gasPrice:o["a"].utils.parseUnits(String(r.min_gasprice),"gwei")}));case 3:if(i=a.sent,c=Object(s["a"])(i,2),u=c[0],l=c[1],!r.doResponse(u,l,"")){a.next=4;break}return r.showAdmStartMint=!1,Object(d["a"])(r.$t("操作成功，请等待区块打包结果!")),a.next=4,r.queryTransation(l.hash);case 4:case"end":return a.stop()}}),a)})))()},queryTransation:function(e,t,r){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=1,a.provider.waitForTransaction(e).then(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(d["a"])(a.$t("blockSuccess"),t),console.log(t),r?r():a.init();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},fixNumber:function(e){if(0==e)return 0;var t=o["a"].utils.hexValue(e);return this.hex2int(t)/o["a"].BigNumber.from(10).pow(this.decimals)},hex2int:function(e){e.indexOf("0x")>=0&&(e=e.substring("2"));for(var t,r=e.length,a=new Array(r),n=0;n<r;n++)t=e.charCodeAt(n),48<=t&&t<58?t-=48:t=(223&t)-65+10,a[n]=t;return a.reduce((function(e,t){return e=16*e+t,e}),0)},doResponse:function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:18;if(null==e){if(r){var n=o["a"].utils.hexValue(t),s=this.hex2int(n)/o["a"].BigNumber.from(10).pow(a);this[r]=s}return!0}try{"UNPREDICTABLE_GAS_LIMIT"===e.code?Object(d["a"])("错误:"+e.error):"INSUFFICIENT_FUNDS"===e.code?Object(d["a"])("矿工费不足"):4001===e.code||"cancelled"===e?Object(d["a"])("交易取消"):e.data.message.indexOf("gas")>0?Object(d["a"])("矿工费不足"):e.data.message.indexOf("RPC")>0?Object(d["a"])("节点异常，请切换节点"):e.data.message.indexOf("reverted")>0&&Object(d["a"])(this.$t("Error")+e.data.message.split(":")[1])}catch(i){}return!1},getEstimateGas:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n,i,u,d,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=1,t.to(e());case 1:if(a=r.sent,n=Object(s["a"])(a,2),i=n[0],u=n[1],!t.doResponse(i,u)){r.next=2;break}return d=o["a"].utils.hexValue(u),l=t.hex2int(d),console.log("getEstimateGas========",l),r.abrupt("return",String(c["a"].mul(l,1.5)).split(".")[0]);case 2:return r.abrupt("return",0);case 3:case"end":return r.stop()}}),r)})))()}}},m=f,p=(r("83c9"),r("2877")),b=Object(p["a"])(m,a,n,!1,null,null,null);t["default"]=b.exports},adad:function(e,t,r){}}]);